/*! enkoder 2015-08-28 */
!function(a){"use strict";var b={init:function(){b.preventScroll(),b.toggleProfile(),b.deleteConfirm(),b.sortNavigation(),b.customTrumbowyg(),b.updateStatus(),b.updateSettings()},preventScroll:function(){location.hash&&setTimeout(function(){window.scrollTo(0,0)},0)},toggleProfile:function(){a("#nav-profile").on("click",function(b){b.preventDefault(),a("#admin-profile-data").fadeToggle()})},deleteConfirm:function(){a(".delete-item").on("click",function(){return confirm("Are you sure you want to delete this item? This cannot be undone.")})},sortNavigation:function(){a(".sortable").sortable({connectWith:".sortable",opacity:.5,update:function(b,c){if(this===c.item.parent()[0]){var d=a(this).sortable("toArray"),e=c.item.parent().attr("id");a.post("/admin/ajax/navorder",{"navorder[]":d,navtype:e})}}})},customTrumbowyg:function(){a("#content").trumbowyg({resetCss:!0,autogrow:!0})},updateStatus:function(){a(".update-status").on("click",function(b){b.preventDefault();var c=a(this),d=c.attr("href"),e=c.parent();a.get(d).done(function(){e.toggleClass("status-live status-draft"),c.html("Live"==c.text()?"Draft":"Live")})})},updateSettings:function(){{var b={};a.getJSON("/admin/ajax/getsettings",function(a){b={email:ko.observable(a.Email),contact:ko.observable(a.Contact),address:ko.observable(a.Address),street:ko.observable(a.Street),suburb:ko.observable(a.Suburb),city:ko.observable(a.City),code:ko.observable(a.Code),facebook:ko.observable(a.Facebook),twitter:ko.observable(a.Twitter),linkedin:ko.observable(a.Linkedin),description:ko.observable(a.Description),keywords:ko.observable(a.Keywords),ganalytics:ko.observable(a.Ganalytics),smtp:ko.observable(a.Smtp)},ko.applyBindings(b)})}a(".tab-content input").prop("disabled",!0),a("#admin-settings-edit").click(function(){a(".admin-settings-input, .admin-settings-display").toggle();var c=a("#admin-settings-edit").text(),d=a("#admin-settings-edit").css("background-color");if(a("#admin-settings-edit").text("Edit"===c?"Done":"Edit").css({"background-color":"rgb(46, 184, 31)"===d?"rgb(17, 165, 224)":"rgb(46, 184, 31)"}),a(".tab-content input").prop("disabled",function(a,b){return!b}),"Done"===c){var e=ko.toJS(b);a.get("/admin/ajax/updatesettings",e).done(function(){a("#settings-updated").show().delay("2000").fadeOut()})}})}};a(function(){b.init()})}(jQuery);